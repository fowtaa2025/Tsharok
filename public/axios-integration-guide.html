<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axios Integration Guide - Tsharok</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .code-inline {
            background: #e2e8f0;
            color: #1e293b;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <i class="fas fa-graduation-cap text-3xl text-indigo-600"></i>
                    <span class="ml-2 text-2xl font-bold text-gray-900">Tsharok</span>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="catalog.html" class="text-gray-700 hover:text-indigo-600">Catalog</a>
                    <a href="catalog-demo.html" class="text-gray-700 hover:text-indigo-600">Demo</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-12">
        <div class="max-w-5xl mx-auto px-4">
            <h1 class="text-4xl font-bold mb-4">
                <i class="fas fa-book mr-3"></i>Axios Integration Guide
            </h1>
            <p class="text-xl text-indigo-100">Complete documentation for AJAX catalog features</p>
        </div>
    </div>

    <div class="max-w-5xl mx-auto px-4 py-8">
        
        <!-- Overview -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-info-circle mr-2"></i>Overview
            </h2>
            <p class="text-gray-700 mb-4">
                The Tsharok LMS catalog implements a modern AJAX architecture using <strong>Axios</strong> 
                for all HTTP requests. This provides enhanced features including request/response interceptors, 
                automatic error handling, request cancellation, and caching.
            </p>
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4">
                <p class="text-blue-900">
                    <i class="fas fa-lightbulb mr-2"></i>
                    <strong>Key Benefits:</strong> Better error handling, request cancellation, 
                    automatic retry logic, response caching, and performance monitoring.
                </p>
            </div>
        </section>

        <!-- Architecture -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-sitemap mr-2"></i>Architecture
            </h2>
            <div class="space-y-4">
                <div>
                    <h3 class="text-xl font-semibold mb-2">File Structure</h3>
                    <div class="code-block">
public/assets/js/
├── axios-config.js          # Axios instance & interceptors
├── courses.js               # Core course API functions
├── catalog-integration.js   # Advanced features (cache, batch, etc.)
└── main.js                  # General utilities</div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-2">Request Flow</h3>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li>User action triggers API call</li>
                        <li>Request interceptor adds metadata</li>
                        <li>Axios sends HTTP request to backend</li>
                        <li>Response interceptor processes result</li>
                        <li>Data returned to caller or error handled</li>
                        <li>Performance metrics recorded</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- Core Features -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-star mr-2"></i>Core Features
            </h2>

            <!-- Feature 1 -->
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-3 flex items-center">
                    <span class="bg-indigo-100 text-indigo-600 w-8 h-8 rounded-full flex items-center justify-center mr-3">1</span>
                    Basic API Calls
                </h3>
                <p class="text-gray-700 mb-3">All API functions use Axios instead of fetch for better error handling.</p>
                <div class="code-block">
// Fetch courses with filters
const data = await fetchCourses({
    search: 'programming',
    major: 1,
    level: 3,
    limit: 12,
    offset: 0
});

// Fetch specific course details
const course = await fetchCourseDetails(courseId);

// Fetch majors
const majors = await fetchMajors();</div>
            </div>

            <!-- Feature 2 -->
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-3 flex items-center">
                    <span class="bg-indigo-100 text-indigo-600 w-8 h-8 rounded-full flex items-center justify-center mr-3">2</span>
                    Response Caching
                </h3>
                <p class="text-gray-700 mb-3">Cache API responses to reduce server load and improve performance.</p>
                <div class="code-block">
// Use cached version if available (5-minute TTL)
const data = await fetchCoursesWithCache({ limit: 12 });

// Clear cache manually
catalogCache.clear();

// Check if data is cached
if (catalogCache.has('courses_{}')) {
    // Data is cached
}</div>
            </div>

            <!-- Feature 3 -->
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-3 flex items-center">
                    <span class="bg-indigo-100 text-indigo-600 w-8 h-8 rounded-full flex items-center justify-center mr-3">3</span>
                    Parallel Requests
                </h3>
                <p class="text-gray-700 mb-3">Load multiple resources simultaneously for better performance.</p>
                <div class="code-block">
// Load courses, majors, and stats in parallel
const result = await loadCatalogDataParallel();

// result.courses - array of courses
// result.majors - array of majors
// result.totalCourses - total count
// result.loadTime - time taken in ms</div>
            </div>

            <!-- Feature 4 -->
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-3 flex items-center">
                    <span class="bg-indigo-100 text-indigo-600 w-8 h-8 rounded-full flex items-center justify-center mr-3">4</span>
                    Request Cancellation
                </h3>
                <p class="text-gray-700 mb-3">Cancel ongoing requests when user performs new actions.</p>
                <div class="code-block">
// Cancel previous request automatically
const data = await loadCoursesWithCancellation(filters);

// Or manually with axios
const CancelToken = axios.CancelToken;
const source = CancelToken.source();

axiosInstance.get('/courses.php', {
    cancelToken: source.token
});

// Later... cancel the request
source.cancel('Operation cancelled');</div>
            </div>

            <!-- Feature 5 -->
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-3 flex items-center">
                    <span class="bg-indigo-100 text-indigo-600 w-8 h-8 rounded-full flex items-center justify-center mr-3">5</span>
                    Batch Operations
                </h3>
                <p class="text-gray-700 mb-3">Load multiple course details efficiently.</p>
                <div class="code-block">
// Batch load details for multiple courses
const courseIds = [1, 2, 3, 4, 5];
const result = await batchLoadCourseDetails(courseIds);

// result.successful - array of successful loads
// result.failed - array of failed loads</div>
            </div>

            <!-- Feature 6 -->
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-3 flex items-center">
                    <span class="bg-indigo-100 text-indigo-600 w-8 h-8 rounded-full flex items-center justify-center mr-3">6</span>
                    Performance Monitoring
                </h3>
                <p class="text-gray-700 mb-3">Track API performance metrics automatically.</p>
                <div class="code-block">
// Get performance summary
const stats = catalogPerformanceMonitor.getSummary();

// stats.totalRequests - number of requests made
// stats.averageResponseTime - avg time in ms
// stats.successRate - percentage of successful requests</div>
            </div>
        </section>

        <!-- API Reference -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-code mr-2"></i>API Reference
            </h2>

            <div class="space-y-6">
                <!-- fetchCourses -->
                <div class="border-l-4 border-indigo-500 pl-4">
                    <h3 class="font-mono text-lg font-semibold mb-2">fetchCourses(filters)</h3>
                    <p class="text-gray-700 mb-2">Fetches courses from the API with optional filters.</p>
                    <div class="bg-gray-50 rounded p-3 mb-2">
                        <strong>Parameters:</strong>
                        <ul class="list-disc list-inside ml-4 text-sm text-gray-600">
                            <li><span class="code-inline">filters.search</span> - Search term</li>
                            <li><span class="code-inline">filters.major</span> - Major ID filter</li>
                            <li><span class="code-inline">filters.level</span> - Level filter (1-8)</li>
                            <li><span class="code-inline">filters.limit</span> - Results per page</li>
                            <li><span class="code-inline">filters.offset</span> - Pagination offset</li>
                            <li><span class="code-inline">filters.sort</span> - Sort field</li>
                        </ul>
                    </div>
                    <div class="bg-gray-50 rounded p-3">
                        <strong>Returns:</strong> <span class="code-inline">Promise&lt;{courses, pagination}&gt;</span>
                    </div>
                </div>

                <!-- fetchCourseDetails -->
                <div class="border-l-4 border-green-500 pl-4">
                    <h3 class="font-mono text-lg font-semibold mb-2">fetchCourseDetails(courseId)</h3>
                    <p class="text-gray-700 mb-2">Fetches detailed information for a specific course.</p>
                    <div class="bg-gray-50 rounded p-3 mb-2">
                        <strong>Parameters:</strong>
                        <ul class="list-disc list-inside ml-4 text-sm text-gray-600">
                            <li><span class="code-inline">courseId</span> - Course ID (number)</li>
                        </ul>
                    </div>
                    <div class="bg-gray-50 rounded p-3">
                        <strong>Returns:</strong> <span class="code-inline">Promise&lt;Course&gt;</span>
                    </div>
                </div>

                <!-- enrollInCourse -->
                <div class="border-l-4 border-blue-500 pl-4">
                    <h3 class="font-mono text-lg font-semibold mb-2">enrollInCourse(courseId)</h3>
                    <p class="text-gray-700 mb-2">Enrolls the current user in a course.</p>
                    <div class="bg-gray-50 rounded p-3 mb-2">
                        <strong>Parameters:</strong>
                        <ul class="list-disc list-inside ml-4 text-sm text-gray-600">
                            <li><span class="code-inline">courseId</span> - Course ID (number)</li>
                        </ul>
                    </div>
                    <div class="bg-gray-50 rounded p-3">
                        <strong>Returns:</strong> <span class="code-inline">Promise&lt;{enrollmentId, courseName}&gt;</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Error Handling -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-exclamation-triangle mr-2"></i>Error Handling
            </h2>
            <p class="text-gray-700 mb-4">
                Axios interceptors automatically handle common error scenarios:
            </p>
            <div class="space-y-3">
                <div class="flex items-start">
                    <span class="bg-red-100 text-red-600 px-3 py-1 rounded mr-3 font-semibold">401</span>
                    <div>
                        <strong>Unauthorized</strong> - Redirects to login page
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="bg-orange-100 text-orange-600 px-3 py-1 rounded mr-3 font-semibold">404</span>
                    <div>
                        <strong>Not Found</strong> - Shows "Resource not found" message
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="bg-yellow-100 text-yellow-600 px-3 py-1 rounded mr-3 font-semibold">500</span>
                    <div>
                        <strong>Server Error</strong> - Shows generic error message
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="bg-purple-100 text-purple-600 px-3 py-1 rounded mr-3 font-semibold">Network</span>
                    <div>
                        <strong>Network Error</strong> - Shows connection error message
                    </div>
                </div>
            </div>
            
            <div class="mt-4 code-block">
try {
    const data = await fetchCourses(filters);
    // Handle success
} catch (error) {
    // Error is already formatted by interceptor
    console.error(error.message);
    showMessage(error.message, 'error');
}</div>
        </section>

        <!-- Best Practices -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-check-circle mr-2"></i>Best Practices
            </h2>
            <div class="space-y-4">
                <div class="flex items-start">
                    <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                    <div>
                        <strong>Use caching for repeated requests</strong> - Reduces server load and improves UX
                    </div>
                </div>
                <div class="flex items-start">
                    <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                    <div>
                        <strong>Cancel previous search requests</strong> - Prevents race conditions
                    </div>
                </div>
                <div class="flex items-start">
                    <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                    <div>
                        <strong>Batch operations when possible</strong> - More efficient than multiple individual requests
                    </div>
                </div>
                <div class="flex items-start">
                    <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                    <div>
                        <strong>Show loading states</strong> - Keep users informed during async operations
                    </div>
                </div>
                <div class="flex items-start">
                    <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                    <div>
                        <strong>Handle errors gracefully</strong> - Always provide retry options
                    </div>
                </div>
            </div>
        </section>

        <!-- Examples -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-code-branch mr-2"></i>Usage Examples
            </h2>

            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-2">Example 1: Load Courses with Filters</h3>
                <div class="code-block">
async function loadFilteredCourses() {
    try {
        const data = await fetchCourses({
            search: 'web development',
            major: 1,
            level: 3,
            limit: 12,
            offset: 0,
            sort: 'enrollment_count'
        });
        
        displayCourses(data.courses, 'courses-grid');
        console.log(`Loaded ${data.courses.length} courses`);
        
    } catch (error) {
        showMessage('Failed to load courses', 'error');
    }
}</div>
            </div>

            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-2">Example 2: Search with Debounce</h3>
                <div class="code-block">
let searchTimeout;

function handleSearch(query) {
    clearTimeout(searchTimeout);
    
    searchTimeout = setTimeout(async () => {
        const data = await fetchCoursesWithCache({
            search: query,
            limit: 10
        });
        
        displayResults(data.courses);
    }, 500); // Wait 500ms after user stops typing
}</div>
            </div>

            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-2">Example 3: Enroll in Course</h3>
                <div class="code-block">
async function handleEnroll(courseId) {
    try {
        const result = await enrollInCourse(courseId);
        
        showMessage(
            `Successfully enrolled in ${result.courseName}!`,
            'success'
        );
        
        // Refresh user's enrolled courses
        loadMyCourses();
        
    } catch (error) {
        showMessage(error.message, 'error');
    }
}</div>
            </div>
        </section>

        <!-- Debug Tools -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-bug mr-2"></i>Debug Tools
            </h2>
            <p class="text-gray-700 mb-4">
                Open browser console and use these debug commands:
            </p>
            <div class="code-block">
// Clear cache
debugCatalog.clearCache()

// Get performance stats
debugCatalog.getStats()

// Load data in parallel
await debugCatalog.loadParallel()

// View current filters
debugCatalog.currentFilters()

// View all available functions
console.log(window.debugCatalog)</div>
        </section>

        <!-- Links -->
        <section class="bg-indigo-50 rounded-lg p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600">
                <i class="fas fa-link mr-2"></i>Quick Links
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <a href="catalog.html" class="bg-white p-4 rounded-lg shadow hover:shadow-lg transition">
                    <i class="fas fa-book text-indigo-600 mr-2"></i>
                    <strong>Course Catalog</strong>
                    <p class="text-sm text-gray-600">View the live catalog page</p>
                </a>
                <a href="catalog-demo.html" class="bg-white p-4 rounded-lg shadow hover:shadow-lg transition">
                    <i class="fas fa-flask text-indigo-600 mr-2"></i>
                    <strong>Interactive Demo</strong>
                    <p class="text-sm text-gray-600">Test all Axios features</p>
                </a>
            </div>
        </section>

    </div>

</body>
</html>

