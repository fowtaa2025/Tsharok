<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Courses - Tsharok</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/design-system.css">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2C3E50',
                        secondary: '#34495E',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
        }
        
        /* Background with animated diagonal lines */
        .bg-diagonal-pattern {
            position: relative;
            min-height: 100vh;
            background-color: #f8fafc;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        /* Multiple layers of diagonal lines */
        .bg-diagonal-pattern::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background-image: 
                repeating-linear-gradient(
                    -45deg,
                    transparent,
                    transparent 40px,
                    rgba(180, 180, 180, 0.12) 40px,
                    rgba(180, 180, 180, 0.12) 42px
                ),
                repeating-linear-gradient(
                    -45deg,
                    transparent,
                    transparent 80px,
                    rgba(160, 160, 160, 0.08) 80px,
                    rgba(160, 160, 160, 0.08) 84px
                ),
                repeating-linear-gradient(
                    -45deg,
                    transparent,
                    transparent 120px,
                    rgba(140, 140, 140, 0.06) 120px,
                    rgba(140, 140, 140, 0.06) 126px
                );
            pointer-events: none;
            z-index: 0;
            animation: diagonalMove 30s linear infinite;
        }
        
        .bg-diagonal-pattern::after {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background-image: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 60px,
                    rgba(200, 200, 200, 0.06) 60px,
                    rgba(200, 200, 200, 0.06) 62px
                ),
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 100px,
                    rgba(180, 180, 180, 0.04) 100px,
                    rgba(180, 180, 180, 0.04) 104px
                );
            pointer-events: none;
            z-index: 0;
            animation: diagonalMoveReverse 25s linear infinite;
        }
        
        /* Animated floating shapes */
        .bg-shapes {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        
        .floating-line {
            position: absolute;
            background: linear-gradient(90deg, transparent, rgba(44, 62, 80, 0.08), transparent);
            transform: rotate(-45deg);
            animation: floatLine 20s ease-in-out infinite;
        }
        
        .floating-line:nth-child(1) { width: 300px; height: 3px; top: 5%; left: 10%; animation-delay: 0s; }
        .floating-line:nth-child(2) { width: 250px; height: 2px; top: 15%; right: 15%; animation-delay: -3s; }
        .floating-line:nth-child(3) { width: 400px; height: 4px; top: 25%; left: 5%; animation-delay: -6s; }
        .floating-line:nth-child(4) { width: 200px; height: 2px; top: 35%; right: 25%; animation-delay: -9s; }
        .floating-line:nth-child(5) { width: 350px; height: 3px; top: 45%; left: 15%; animation-delay: -12s; }
        .floating-line:nth-child(6) { width: 280px; height: 2px; top: 55%; right: 10%; animation-delay: -15s; }
        .floating-line:nth-child(7) { width: 320px; height: 3px; top: 65%; left: 20%; animation-delay: -18s; }
        .floating-line:nth-child(8) { width: 180px; height: 2px; top: 75%; right: 20%; animation-delay: -21s; }
        .floating-line:nth-child(9) { width: 450px; height: 4px; top: 85%; left: 8%; animation-delay: -24s; }
        .floating-line:nth-child(10) { width: 220px; height: 2px; top: 95%; right: 30%; animation-delay: -27s; }
        
        /* Additional decorative lines */
        .floating-line:nth-child(11) { width: 380px; height: 3px; top: 10%; left: 40%; animation-delay: -2s; }
        .floating-line:nth-child(12) { width: 260px; height: 2px; top: 30%; right: 5%; animation-delay: -5s; }
        .floating-line:nth-child(13) { width: 340px; height: 3px; top: 50%; left: 30%; animation-delay: -8s; }
        .floating-line:nth-child(14) { width: 200px; height: 2px; top: 70%; right: 35%; animation-delay: -11s; }
        .floating-line:nth-child(15) { width: 420px; height: 4px; top: 90%; left: 25%; animation-delay: -14s; }
        
        /* Animated dots */
        .floating-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            background: rgba(44, 62, 80, 0.1);
            border-radius: 50%;
            animation: floatDot 15s ease-in-out infinite;
        }
        
        .floating-dot:nth-child(16) { top: 8%; left: 25%; animation-delay: 0s; }
        .floating-dot:nth-child(17) { top: 18%; right: 35%; animation-delay: -2s; }
        .floating-dot:nth-child(18) { top: 28%; left: 45%; animation-delay: -4s; }
        .floating-dot:nth-child(19) { top: 38%; right: 15%; animation-delay: -6s; }
        .floating-dot:nth-child(20) { top: 48%; left: 35%; animation-delay: -8s; }
        .floating-dot:nth-child(21) { top: 58%; right: 45%; animation-delay: -10s; }
        .floating-dot:nth-child(22) { top: 68%; left: 55%; animation-delay: -12s; }
        .floating-dot:nth-child(23) { top: 78%; right: 25%; animation-delay: -14s; }
        
        /* Animations */
        @keyframes diagonalMove {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(100px) translateY(100px); }
        }
        
        @keyframes diagonalMoveReverse {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(-80px) translateY(-80px); }
        }
        
        @keyframes floatLine {
            0%, 100% { 
                opacity: 0.3;
                transform: rotate(-45deg) translateX(0) translateY(0);
            }
            25% {
                opacity: 0.6;
                transform: rotate(-45deg) translateX(30px) translateY(-20px);
            }
            50% { 
                opacity: 0.4;
                transform: rotate(-45deg) translateX(50px) translateY(10px);
            }
            75% {
                opacity: 0.7;
                transform: rotate(-45deg) translateX(20px) translateY(30px);
            }
        }
        
        @keyframes floatDot {
            0%, 100% { 
                opacity: 0.2;
                transform: scale(1) translateY(0);
            }
            50% { 
                opacity: 0.5;
                transform: scale(1.5) translateY(-20px);
            }
        }
        
        .content-wrapper {
            position: relative;
            z-index: 1;
        }
        
        /* Course card styles */
        .course-card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
            backdrop-filter: blur(5px);
            min-width: 180px;
        }
        
        .course-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .course-card.added {
            background: #f9fafb;
        }
        
        .course-code {
            color: #0d9488;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .course-name {
            font-weight: 600;
            color: #1f2937;
            font-size: 0.95rem;
            margin: 4px 0 8px 0;
            line-height: 1.3;
        }
        
        .course-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }
        
        .add-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #f3f4f6;
            border: 2px solid #d1d5db;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: #6b7280;
        }
        
        .add-btn:hover {
            background: #2C3E50;
            border-color: #2C3E50;
            color: white;
        }
        
        .add-btn.added {
            background: #22c55e;
            border-color: #22c55e;
            color: white;
        }
        
        .level-badge {
            background: #e5e7eb;
            color: #6b7280;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            display: inline-block;
            margin-bottom: 8px;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Page Background Container -->
    <div class="bg-shapes-container min-h-screen">
    <!-- Background Shapes -->
    <div class="bg-shape bg-circle"></div>
    <div class="bg-shape bg-rounded-rect"></div>

    <!-- Top Navigation -->
    <nav class="bg-white border-b border-gray-200 shadow-sm relative z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Left Side - Logo -->
                <div class="flex items-center">
                    <a href="student.html" class="flex items-center">
                        <img src="../assets/images/Logo.png" alt="Tsharok Logo" class="h-10">
                    </a>
                </div>

                <!-- Center - Search -->
                <div class="flex-1 max-w-xl mx-8">
                    <div class="relative">
                        <input 
                            type="text" 
                            id="searchInput"
                            placeholder="Search courses..." 
                            class="w-full px-4 py-2 pl-10 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-gray-800"
                        >
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600">
                            <i class="fas fa-filter"></i>
                        </button>
                    </div>
                </div>

                <!-- Right Side - User Info -->
                <div class="flex items-center space-x-4">
                    <span class="text-gray-700 font-medium" data-user-name>student name</span>
                    <div class="relative">
                        <button onclick="toggleProfileDropdown()" id="profileButton" class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white font-bold hover:bg-secondary transition cursor-pointer">
                            <span id="profileInitial">S</span>
                        </button>
                        <!-- Dropdown -->
                        <div id="profileDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50">
                            <a href="profile.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
                                <i class="fas fa-user-circle mr-2"></i>My Profile
                            </a>
                            <a href="settings.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
                                <i class="fas fa-cog mr-2"></i>Settings
                            </a>
                            <hr class="my-2">
                            <button onclick="logout()" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 transition">
                                <i class="fas fa-sign-out-alt mr-2"></i>Logout
                            </button>
                        </div>
                    </div>
                    <button onclick="toggleLanguage()" class="text-gray-700 hover:text-primary transition font-medium">
                        عربي
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="relative z-10 max-w-7xl mx-auto px-6 py-8">
        <!-- Back Button & Title -->
        <div class="flex items-center justify-between mb-8">
            <div>
                <a href="student.html" class="text-gray-600 hover:text-primary mb-2 inline-block">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                </a>
                <h1 class="text-3xl font-bold text-gray-900 italic">Add Courses to your schedule</h1>
            </div>
            <div class="flex items-center gap-4">
                <select id="filterMajor" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-700">
                    <option value="">All Majors</option>
                    <option value="cs">Computer Science</option>
                    <option value="it">Information Technology</option>
                    <option value="eng">Engineering</option>
                    <option value="bus">Business</option>
                </select>
                <select id="filterSemester" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-gray-700">
                    <option value="">All Levels</option>
                    <option value="1">Level 1</option>
                    <option value="2">Level 2</option>
                    <option value="3">Level 3</option>
                    <option value="4">Level 4</option>
                    <option value="5">Level 5</option>
                    <option value="6">Level 6</option>
                    <option value="7">Level 7</option>
                    <option value="8">Level 8</option>
                    <option value="9">Level 9</option>
                    <option value="10">Level 10</option>
                    <option value="elective">Elective</option>
                </select>
            </div>
        </div>

        <!-- Course Grid by Levels -->
        <div id="courseGrid">
            <!-- Courses will be loaded dynamically by level -->
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="hidden text-center py-12">
            <i class="fas fa-spinner fa-spin text-4xl text-primary mb-4"></i>
            <p class="text-gray-600">Loading courses...</p>
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="hidden text-center py-12">
            <i class="fas fa-search text-6xl text-gray-300 mb-4"></i>
            <p class="text-gray-600 text-lg">No courses found</p>
            <p class="text-gray-500">Try adjusting your search or filters</p>
        </div>
    </main>

    <!-- Success Toast -->
    <div id="toast" class="fixed bottom-6 right-6 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 hidden transform transition-transform">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span id="toastMessage">Course added successfully!</span>
        </div>
    </div>

    <script src="../assets/js/session.js"></script>
    <script src="../assets/js/background-styles.js"></script>
    <script>
        // Require authentication
        requireAuth(['student', 'admin']).then(authenticated => {
            if (authenticated) {
                loadCourses();
            }
        });

        // Course data organized by levels
        const coursesByLevel = {
            1: [
                { id: 1, code: '48021400-4', name: 'Calculus (1)', hours: 4, rating: 4.5 },
                { id: 2, code: '48021700-6', name: 'English Language (1)', hours: 6, rating: 4.5 },
                { id: 3, code: '48021503-3', name: 'Computer Programming Skills', hours: 3, rating: 4.5 },
                { id: 4, code: '48021200-4', name: 'General Chemistry (1)', hours: 4, rating: 4.5 },
            ],
            2: [
                { id: 5, code: '48021300-4', name: 'General Physics (1)', hours: 4, rating: 4.5 },
                { id: 6, code: '48021701-4', name: 'Technical English', hours: 4, rating: 4.5 },
                { id: 7, code: '48021002-3', name: 'Learning Skills', hours: 3, rating: 4.5 },
                { id: 8, code: '48021401-4', name: 'Calculus (2)', hours: 4, rating: 4.5 },
            ],
            3: [
                { id: 9, code: '14011801-3', name: 'Discrete Structures I', hours: 3, rating: 4.5 },
                { id: 10, code: '4042301-3', name: 'Elements of Statistics and Probability', hours: 3, rating: 4.5 },
                { id: 11, code: '14031201-4', name: 'Digital Logic Design', hours: 4, rating: 4.5 },
                { id: 12, code: '605101-2', name: 'The Holy Qur\'aan I', hours: 2, rating: 4.5 },
                { id: 13, code: '14011101-4', name: 'Computer Programming', hours: 4, rating: 4.5 },
            ],
            4: [
                { id: 14, code: '14011102-4', name: 'Object Oriented Programming', hours: 4, rating: 4.5 },
                { id: 15, code: '4042402-4', name: 'Linear Algebra (1)', hours: 4, rating: 4.5 },
                { id: 16, code: '14032205-4', name: 'Computer Organization & Architecture', hours: 4, rating: 4.5 },
                { id: 17, code: '14011802-3', name: 'Discrete Structures II', hours: 3, rating: 4.5 },
            ],
            5: [
                { id: 18, code: '14032401-4', name: 'Numerical Methods for Computing', hours: 4, rating: 4.5 },
                { id: 19, code: '14012301-3', name: 'Database I', hours: 3, rating: 4.5 },
                { id: 20, code: '14012401-3', name: 'Data Structures', hours: 3, rating: 4.5 },
                { id: 21, code: '14012203-4', name: 'Operating Systems', hours: 4, rating: 4.5 },
                { id: 22, code: '601101-2', name: 'Islamic Culture I', hours: 2, rating: 4.5 },
            ],
            6: [
                { id: 23, code: '605201-2', name: 'The Holy Qur\'aan II', hours: 2, rating: 4.5 },
                { id: 24, code: '14012109-3', name: 'Compilers Construction', hours: 3, rating: 4.5 },
                { id: 25, code: '14012402-4', name: 'Algorithms', hours: 4, rating: 4.5 },
                { id: 26, code: '14012501-3', name: 'Computer Graphics', hours: 3, rating: 4.5 },
                { id: 27, code: '14033103-4', name: 'Computer Networks', hours: 4, rating: 4.5 },
            ],
            7: [
                { id: 28, code: '14013303-3', name: 'Software Engineering I', hours: 3, rating: 4.5 },
                { id: 29, code: '14013701-4', name: 'Artificial Intelligence', hours: 4, rating: 4.5 },
                { id: 30, code: '601201-2', name: 'Islamic Culture II', hours: 2, rating: 4.5 },
                { id: 31, code: '14013104-3', name: 'Internet Applications', hours: 3, rating: 4.5 },
                { id: 32, code: '14013103-4', name: 'Advanced Programming', hours: 4, rating: 4.5 },
            ],
            8: [
                { id: 33, code: '14013888-2', name: 'Summer Training', hours: 2, rating: 4.5 },
                { id: 34, code: '14013602-3', name: 'Computer Security', hours: 3, rating: 4.5 },
                { id: 35, code: '14013502-3', name: 'User Interface Design', hours: 3, rating: 4.5 },
                { id: 36, code: '14013304-3', name: 'Software Engineering II', hours: 3, rating: 4.5 },
                { id: 37, code: '14013204-3', name: 'Parallel Computing', hours: 3, rating: 4.5 },
                { id: 38, code: '605301-2', name: 'The Holy Qur\'aan III', hours: 2, rating: 4.5 },
            ],
            9: [
                { id: 39, code: '14014902-4', name: 'Graduation Project I', hours: 4, rating: 4.5 },
                { id: 40, code: '14014305-2', name: 'Computers and Society', hours: 2, rating: 4.5 },
                { id: 41, code: '605401-2', name: 'The Holy Qur\'aan (IV)', hours: 2, rating: 4.5 },
                { id: 42, code: '601301-3', name: 'Islamic Culture III', hours: 3, rating: 4.5 },
            ],
            10: [
                { id: 43, code: '102101-2', name: 'Biography of the Prophet', hours: 2, rating: 4.5 },
                { id: 44, code: '14014903-4', name: 'Graduation Project II', hours: 4, rating: 4.5 },
                { id: 45, code: '501101-2', name: 'Arabic Language I', hours: 2, rating: 4.5 },
                { id: 46, code: '601401-2', name: 'Islamic Culture (iv)', hours: 2, rating: 4.5 },
            ],
            'Elective': [
                { id: 47, code: '14014905-3', name: 'Special Topics I', hours: 3, rating: 4.5 },
                { id: 48, code: '14014106-3', name: 'Programming Languages', hours: 3, rating: 4.5 },
                { id: 49, code: '14014604-3', name: 'Introduction to Cryptography', hours: 3, rating: 4.5 },
                { id: 50, code: '14014605-3', name: 'Forensics Computing', hours: 3, rating: 4.5 },
                { id: 51, code: '14014702-3', name: 'Artificial Neural Networks', hours: 3, rating: 4.5 },
                { id: 52, code: '14014703-3', name: 'Pattern Recognition', hours: 3, rating: 4.5 },
                { id: 53, code: '14014704-3', name: 'Natural Language Processing', hours: 3, rating: 4.5 },
                { id: 54, code: '14014803-3', name: 'Theory of Computing', hours: 3, rating: 4.5 },
                { id: 55, code: '14014305-3', name: 'Big Data Analytics', hours: 3, rating: 4.5 },
                { id: 56, code: '14014306-3', name: 'Software Testing', hours: 3, rating: 4.5 },
                { id: 57, code: '14014307-3', name: 'Software Architecture', hours: 3, rating: 4.5 },
                { id: 58, code: '14014308-3', name: 'Information Retrieval Systems', hours: 3, rating: 4.5 },
                { id: 59, code: '14014404-3', name: 'Bioinformatics', hours: 3, rating: 4.5 },
                { id: 60, code: '14014503-3', name: 'Image Processing', hours: 3, rating: 4.5 },
                { id: 61, code: '14014105-3', name: 'Mobile Applications', hours: 3, rating: 4.5 },
                { id: 62, code: '14014906-3', name: 'Special Topics II', hours: 3, rating: 4.5 },
                { id: 63, code: '14014108-3', name: 'Game Programming', hours: 3, rating: 4.5 },
                { id: 64, code: '14014110-3', name: 'Advanced Web Programming', hours: 3, rating: 4.5 },
                { id: 65, code: '14014205-3', name: 'Cloud Computing', hours: 3, rating: 4.5 },
                { id: 66, code: '14014302-3', name: 'Database II', hours: 3, rating: 4.5 },
            ]
        };

        // Get added courses from localStorage
        function getAddedCourses() {
            return JSON.parse(localStorage.getItem('addedCourses') || '[]');
        }

        // Save added courses to localStorage
        function saveAddedCourses(courses) {
            localStorage.setItem('addedCourses', JSON.stringify(courses));
        }

        // Create course card HTML
        function createCourseCard(course, level, isAdded) {
            const levelText = level === 'Elective' ? 'Elective' : `Level ${level}`;
            return `
                <div class="course-card ${isAdded ? 'added' : ''}" data-course-id="${course.id}" data-level="${level}">
                    <p class="course-code">${course.code}</p>
                    <h3 class="course-name">${course.name}</h3>
                    <span class="level-badge">${levelText}</span>
                    <div class="course-footer">
                        <div class="text-sm text-gray-600">
                            <span>Knowledge</span> <span class="font-semibold text-gray-800">${course.rating}</span><i class="fas fa-star text-yellow-400 ml-1 text-xs"></i>
                        </div>
                        <button 
                            onclick="toggleCourse(${course.id})" 
                            class="add-btn ${isAdded ? 'added' : ''}"
                            title="${isAdded ? 'Remove from schedule' : 'Add to schedule'}"
                        >
                            <i class="fas ${isAdded ? 'fa-check' : 'fa-plus'}"></i>
                        </button>
                    </div>
                </div>
            `;
        }

        // Load and display all courses in one grid
        function loadCourses() {
            // Update profile initial
            const user = typeof getCurrentUser === 'function' ? getCurrentUser() : JSON.parse(localStorage.getItem('user') || '{}');
            if (user) {
                const initial = (user.fullName || user.name || 'S').charAt(0).toUpperCase();
                const profileInitial = document.getElementById('profileInitial');
                if (profileInitial) profileInitial.textContent = initial;
                
                // Update name display
                const nameElements = document.querySelectorAll('[data-user-name]');
                nameElements.forEach(el => {
                    el.textContent = user.fullName || user.name || 'Student';
                });
            }
            
            const grid = document.getElementById('courseGrid');
            const addedCourses = getAddedCourses();
            
            // Collect all courses with their levels
            let allCourses = [];
            
            // Add courses from levels 1-10
            for (let level = 1; level <= 10; level++) {
                if (coursesByLevel[level]) {
                    coursesByLevel[level].forEach(course => {
                        allCourses.push({ ...course, level: level });
                    });
                }
            }
            
            // Add Elective courses
            if (coursesByLevel['Elective']) {
                coursesByLevel['Elective'].forEach(course => {
                    allCourses.push({ ...course, level: 'Elective' });
                });
            }
            
            // Render all courses in one grid
            grid.innerHTML = `
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                    ${allCourses.map(course => {
                        const isAdded = addedCourses.includes(course.id);
                        return createCourseCard(course, course.level, isAdded);
                    }).join('')}
                </div>
            `;
        }

        // Toggle course add/remove
        function toggleCourse(courseId) {
            let addedCourses = getAddedCourses();
            const card = document.querySelector(`[data-course-id="${courseId}"]`);
            const btn = card.querySelector('.add-btn');
            const icon = btn.querySelector('i');
            
            if (addedCourses.includes(courseId)) {
                // Remove course
                addedCourses = addedCourses.filter(id => id !== courseId);
                card.classList.remove('added');
                btn.classList.remove('added');
                icon.classList.remove('fa-check');
                icon.classList.add('fa-plus');
                showToast('Course removed from schedule');
            } else {
                // Add course
                addedCourses.push(courseId);
                card.classList.add('added');
                btn.classList.add('added');
                icon.classList.remove('fa-plus');
                icon.classList.add('fa-check');
                showToast('Course added to schedule!');
            }
            
            saveAddedCourses(addedCourses);
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.course-card');
            let hasResults = false;
            
            cards.forEach(card => {
                const courseName = card.querySelector('.course-name').textContent.toLowerCase();
                const courseCode = card.querySelector('.course-code').textContent.toLowerCase();
                
                if (courseName.includes(searchTerm) || courseCode.includes(searchTerm)) {
                    card.style.display = 'block';
                    hasResults = true;
                } else {
                    card.style.display = 'none';
                }
            });
            
            document.getElementById('emptyState').classList.toggle('hidden', hasResults);
        });
        
        // Filter by level
        document.getElementById('filterSemester').addEventListener('change', function(e) {
            const selectedLevel = e.target.value;
            const cards = document.querySelectorAll('.course-card');
            let hasResults = false;
            
            cards.forEach(card => {
                const cardLevel = card.dataset.level;
                if (!selectedLevel || cardLevel === selectedLevel || (selectedLevel === 'elective' && cardLevel === 'Elective')) {
                    card.style.display = 'block';
                    hasResults = true;
                } else {
                    card.style.display = 'none';
                }
            });
            
            document.getElementById('emptyState').classList.toggle('hidden', hasResults);
        });

        // Profile dropdown toggle
        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('hidden');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('profileDropdown');
            const profileBtn = e.target.closest('button');
            if (!profileBtn || !profileBtn.onclick?.toString().includes('toggleProfileDropdown')) {
                if (!e.target.closest('#profileDropdown')) {
                    dropdown?.classList.add('hidden');
                }
            }
        });

        // Language toggle placeholder
        function toggleLanguage() {
            alert('Language toggle coming soon!');
        }
    </script>
    </div><!-- End of bg-shapes-container -->
</body>
</html>


