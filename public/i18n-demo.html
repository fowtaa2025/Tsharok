<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multilingual Demo - Tsharok</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 py-8">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <h1 class="text-3xl font-bold text-gray-900">
                    <span data-i18n="app.name">Tsharok</span> - 
                    <span data-i18n="common.language" data-i18n-namespace="common">Language</span> Demo
                </h1>
                
                <!-- Language Switcher -->
                <div class="flex gap-2">
                    <button onclick="setLanguage('en')" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        ðŸ‡ºðŸ‡¸ English
                    </button>
                    <button onclick="setLanguage('ar')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        ðŸ‡¸ðŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                    </button>
                </div>
            </div>
            
            <p class="text-gray-600">
                Current Language: <strong id="currentLang">Loading...</strong> | 
                Direction: <strong id="currentDir">-</strong>
            </p>
        </div>

        <!-- Common Translations -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-4" data-i18n="common.common">Common Translations</h2>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div class="p-4 bg-gray-50 rounded-lg">
                    <h3 class="font-semibold mb-2">Actions</h3>
                    <ul class="space-y-1 text-sm">
                        <li><span data-i18n="actions.submit">Submit</span></li>
                        <li><span data-i18n="actions.cancel">Cancel</span></li>
                        <li><span data-i18n="actions.save">Save</span></li>
                        <li><span data-i18n="actions.delete">Delete</span></li>
                        <li><span data-i18n="actions.search">Search</span></li>
                    </ul>
                </div>
                
                <div class="p-4 bg-gray-50 rounded-lg">
                    <h3 class="font-semibold mb-2">Status</h3>
                    <ul class="space-y-1 text-sm">
                        <li><span data-i18n="status.active">Active</span></li>
                        <li><span data-i18n="status.pending">Pending</span></li>
                        <li><span data-i18n="status.approved">Approved</span></li>
                        <li><span data-i18n="status.rejected">Rejected</span></li>
                        <li><span data-i18n="status.completed">Completed</span></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Auth Translations -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">Authentication</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold mb-2" data-i18n="auth.login.email" data-i18n-namespace="auth">
                        Email
                    </label>
                    <input 
                        type="email" 
                        class="w-full px-4 py-2 border rounded-lg" 
                        data-i18n="auth.login.emailPlaceholder" 
                        data-i18n-target="placeholder"
                        data-i18n-namespace="auth"
                        placeholder="Enter your email"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-semibold mb-2" data-i18n="auth.login.password" data-i18n-namespace="auth">
                        Password
                    </label>
                    <input 
                        type="password" 
                        class="w-full px-4 py-2 border rounded-lg" 
                        data-i18n="auth.login.passwordPlaceholder" 
                        data-i18n-target="placeholder"
                        data-i18n-namespace="auth"
                        placeholder="Enter your password"
                    >
                </div>
                
                <button class="w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                    <span data-i18n="auth.login.button" data-i18n-namespace="auth">Login</span>
                </button>
            </div>
        </div>

        <!-- Course Translations -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-4" data-i18n="courses.catalog.title" data-i18n-namespace="courses">
                Course Catalog
            </h2>
            
            <p class="text-gray-600 mb-4" data-i18n="courses.catalog.subtitle" data-i18n-namespace="courses">
                Browse and explore our courses
            </p>
            
            <div class="grid md:grid-cols-3 gap-4">
                <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                    <span data-i18n="courses.catalog.level" data-i18n-namespace="courses">Level</span>:
                    <span data-i18n="courses.catalog.beginner" data-i18n-namespace="courses">Beginner</span>
                </button>
                
                <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                    <span data-i18n="courses.catalog.level" data-i18n-namespace="courses">Level</span>:
                    <span data-i18n="courses.catalog.intermediate" data-i18n-namespace="courses">Intermediate</span>
                </button>
                
                <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                    <span data-i18n="courses.catalog.level" data-i18n-namespace="courses">Level</span>:
                    <span data-i18n="courses.catalog.advanced" data-i18n-namespace="courses">Advanced</span>
                </button>
            </div>
        </div>

        <!-- Admin Translations -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-4" data-i18n="admin.dashboard.title" data-i18n-namespace="admin">
                Admin Dashboard
            </h2>
            
            <div class="grid md:grid-cols-4 gap-4">
                <div class="p-4 bg-blue-50 rounded-lg text-center">
                    <p class="text-3xl font-bold text-blue-600">124</p>
                    <p class="text-sm text-gray-600" data-i18n="admin.dashboard.totalUsers" data-i18n-namespace="admin">
                        Total Users
                    </p>
                </div>
                
                <div class="p-4 bg-green-50 rounded-lg text-center">
                    <p class="text-3xl font-bold text-green-600">45</p>
                    <p class="text-sm text-gray-600" data-i18n="admin.dashboard.totalCourses" data-i18n-namespace="admin">
                        Total Courses
                    </p>
                </div>
                
                <div class="p-4 bg-purple-50 rounded-lg text-center">
                    <p class="text-3xl font-bold text-purple-600">892</p>
                    <p class="text-sm text-gray-600" data-i18n="admin.dashboard.totalEnrollments" data-i18n-namespace="admin">
                        Total Enrollments
                    </p>
                </div>
                
                <div class="p-4 bg-yellow-50 rounded-lg text-center">
                    <p class="text-3xl font-bold text-yellow-600">23</p>
                    <p class="text-sm text-gray-600" data-i18n="admin.dashboard.pendingApprovals" data-i18n-namespace="admin">
                        Pending Approvals
                    </p>
                </div>
            </div>
        </div>

        <!-- API Testing -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">API Testing</h2>
            
            <div class="space-y-4">
                <button onclick="testGetTranslations()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    Test GET Translations API
                </button>
                
                <button onclick="testGetLanguages()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                    Test GET Languages API
                </button>
                
                <pre id="apiResult" class="p-4 bg-gray-50 rounded-lg text-xs overflow-auto max-h-64 hidden"></pre>
            </div>
        </div>
    </div>

    <script src="./assets/js/i18n-client.js"></script>
    <script>
        // Initialize i18n
        document.addEventListener('DOMContentLoaded', async () => {
            await initI18n();
            await Promise.all([
                loadTranslations('common'),
                loadTranslations('auth'),
                loadTranslations('courses'),
                loadTranslations('admin')
            ]);
            
            updateCurrentLanguage();
            translatePage('common');
            translatePage('auth');
            translatePage('courses');
            translatePage('admin');
        });

        // Update current language display
        function updateCurrentLanguage() {
            const lang = getCurrentLanguage();
            document.getElementById('currentLang').textContent = lang;
            document.getElementById('currentDir').textContent = getDirection(lang);
        }

        // Test APIs
        async function testGetTranslations() {
            try {
                const response = await axios.get('/api/get-translations.php', {
                    params: {
                        language: getCurrentLanguage(),
                        namespace: 'common'
                    }
                });
                
                const result = document.getElementById('apiResult');
                result.textContent = JSON.stringify(response.data, null, 2);
                result.classList.remove('hidden');
            } catch (error) {
                console.error('API Error:', error);
                alert('API Error: ' + error.message);
            }
        }

        async function testGetLanguages() {
            try {
                const response = await axios.get('/api/get-available-languages.php');
                
                const result = document.getElementById('apiResult');
                result.textContent = JSON.stringify(response.data, null, 2);
                result.classList.remove('hidden');
            } catch (error) {
                console.error('API Error:', error);
                alert('API Error: ' + error.message);
            }
        }
    </script>
</body>
</html>

